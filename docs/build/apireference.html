<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Reference · SDDP.jl</title><link href="https://cdnjs.cloudflare.com/ajax/libs/normalize/4.2.0/normalize.min.css" rel="stylesheet" type="text/css"/><link href="https://fonts.googleapis.com/css?family=Lato|Roboto+Mono" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/default.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL="."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.2.0/require.min.js" data-main="assets/documenter.js"></script><script src="siteinfo.js"></script><script src="../versions.js"></script><link href="assets/documenter.css" rel="stylesheet" type="text/css"/></head><body><nav class="toc"><h1>SDDP.jl</h1><select id="version-selector" onChange="window.location.href=this.value" style="visibility: hidden"></select><form class="search" action="search.html"><input id="search-query" name="q" type="text" placeholder="Search docs"/></form><ul><li><a class="toctext" href="index.html">Introduction</a></li><li><a class="toctext" href="quick.html">Quick Start</a></li><li class="current"><a class="toctext" href="apireference.html">Reference</a><ul class="internal"><li><a class="toctext" href="#Defining-the-model-1">Defining the model</a></li><li><a class="toctext" href="#Solve-1">Solve</a></li><li><a class="toctext" href="#Results-1">Results</a></li><li><a class="toctext" href="#Save/Load-1">Save/Load</a></li></ul></li></ul></nav><article id="docs"><header><nav><ul><li><a href="apireference.html">Reference</a></li></ul><a class="edit-page" href="https://github.com/odow/SDDP.jl/tree/7c9c96fc61ce0d8e0a34fc8f48c09afbc05f524d/docs/src/apireference.md"><span class="fa"></span> Edit on GitHub</a></nav><hr/><div id="topbar"><span>Reference</span><a class="fa fa-bars" href="#"></a></div></header><h1><a class="nav-anchor" id="API-Reference-1" href="#API-Reference-1">API Reference</a></h1><h2><a class="nav-anchor" id="Defining-the-model-1" href="#Defining-the-model-1">Defining the model</a></h2><p>&lt;!– SDDPModel –&gt;</p><h3><a class="nav-anchor" id="States-1" href="#States-1">States</a></h3><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="SDDP.@state" href="#SDDP.@state"><code>SDDP.@state</code></a> — <span class="docstring-category">Macro</span>.</div><div><pre><code class="language-none">@state(sp, stateleaving, stateentering)</code></pre><p><strong>Description</strong></p><p>Define a new state variable in the subproblem <code>sp</code>.</p><p><strong>Arguments</strong></p><ul><li><p><code>sp</code>               the subproblem</p></li><li><p><code>stateleaving</code>     any valid JuMP <code>@variable</code> syntax to define the value of the state variable at the end of the stage</p></li><li><p><code>stateentering</code>    any valid JuMP <code>@variable</code> syntax to define the value of the state variable at the beginning of the stage</p></li></ul><p><strong>Examples</strong></p><ul><li><p><code>@state(sp, 0 &lt;= x[i=1:3] &lt;= 1, x0==rand(3)[i] )</code></p></li><li><p><code>@state(sp,      y        &lt;= 1, y0==0.5        )</code></p></li><li><p><code>@state(sp,      z            , z0==0.5        )</code></p></li></ul></div><a class="source-link" target="_blank" href="https://github.com/odow/SDDP.jl/tree/7c9c96fc61ce0d8e0a34fc8f48c09afbc05f524d/src/states.jl#L64-L81">source</a><br/></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="SDDP.@states" href="#SDDP.@states"><code>SDDP.@states</code></a> — <span class="docstring-category">Macro</span>.</div><div><pre><code class="language-none">@states(sp, begin
    stateleaving1, stateentering1
    stateleaving2, stateentering2
end)</code></pre><p><strong>Description</strong></p><p>Define a new state variables in the subproblem <code>sp</code>.</p><p><strong>Arguments</strong></p><ul><li><p><code>sp</code>               the subproblem</p></li><li><p><code>stateleaving</code>     any valid JuMP <code>@variable</code> syntax to define the value of the state variable at the end of the stage</p></li><li><p><code>stateentering</code>    any valid JuMP <code>@variable</code> syntax to define the value of the state variable at the beginning of the stage</p></li></ul><p><strong>Usage</strong></p><pre><code class="language-none">@states(sp, begin
    0 &lt;= x[i=1:3] &lt;= 1, x0==rand(3)[i]
         y        &lt;= 1, y0==0.5
         z            , z0==0.5
 end)</code></pre></div><a class="source-link" target="_blank" href="https://github.com/odow/SDDP.jl/tree/7c9c96fc61ce0d8e0a34fc8f48c09afbc05f524d/src/states.jl#L111-L134">source</a><br/></section><h3><a class="nav-anchor" id="Noises-1" href="#Noises-1">Noises</a></h3><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="SDDP.@noise" href="#SDDP.@noise"><code>SDDP.@noise</code></a> — <span class="docstring-category">Macro</span>.</div><div><pre><code class="language-none">@noise(sp, rhs, constraint)</code></pre><p><strong>Description</strong></p><p>Add a constraint with a noise in the RHS vector to the subproblem <code>sp</code>.</p><p><strong>Arguments</strong></p><ul><li><p><code>sp</code>         the subproblem</p></li><li><p><code>rhs</code>        keyword argument <code>key=value</code> where <code>value</code> is a one-dimensional array containing the noise realisations</p></li><li><p><code>constraint</code> any valid JuMP <code>@constraint</code> syntax that includes the keyword defined by <code>rhs</code></p></li></ul><p><strong>Examples</strong></p><ul><li><p><code>@noise(sp, i=1:2, x + y &lt;= i )</code></p></li><li><p><code>@noise(sp, i=1:2, x + y &lt;= 3 * rand(2)[i] )</code></p></li></ul></div><a class="source-link" target="_blank" href="https://github.com/odow/SDDP.jl/tree/7c9c96fc61ce0d8e0a34fc8f48c09afbc05f524d/src/noises.jl#L42-L57">source</a><br/></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="SDDP.@noises" href="#SDDP.@noises"><code>SDDP.@noises</code></a> — <span class="docstring-category">Macro</span>.</div><div><pre><code class="language-none">@noises(sp, rhs, begin
    constraint
end)</code></pre><p><strong>Description</strong></p><p>The plural form of <code>@noise</code> similar to the JuMP macro <code>@constraints</code>.</p><p><strong>Arguments</strong></p><p>See <code>@noise</code>.</p><p><strong>Examples</strong></p><pre><code class="language-none">@noises(sp, i=1:2, begin
    x + y &lt;= i
    x + y &lt;= 3 * rand(2)[i]
end)</code></pre></div><a class="source-link" target="_blank" href="https://github.com/odow/SDDP.jl/tree/7c9c96fc61ce0d8e0a34fc8f48c09afbc05f524d/src/noises.jl#L97-L115">source</a><br/></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="SDDP.setnoiseprobability!" href="#SDDP.setnoiseprobability!"><code>SDDP.setnoiseprobability!</code></a> — <span class="docstring-category">Function</span>.</div><div><pre><code class="language-none">setnoiseprobability!(sp::JuMP.Model, distribution::Vector{Float64})</code></pre><p><strong>Description</strong></p><p>Set the probability distribution of the stagewise independent noise in the <code>sp</code> subproblem.</p><p><strong>Arguments</strong></p><ul><li><p><code>sp</code>            the subproblem</p></li><li><p><code>distribution</code> vector containing the probability of each outcome occuring.   Should sum to <code>1</code>. Defaults to the uniform distribution.</p></li></ul><p><strong>Examples</strong></p><p>If there are two realizations:</p><ul><li><p><code>setnoiseprobability!(sp, [0.3, 0.7])</code></p></li><li><p><code>setnoiseprobability!(sp, [0.5, 0.6])</code> will error!</p></li></ul></div><a class="source-link" target="_blank" href="https://github.com/odow/SDDP.jl/tree/7c9c96fc61ce0d8e0a34fc8f48c09afbc05f524d/src/noises.jl#L18-L35">source</a><br/></section><h3><a class="nav-anchor" id="Objective-1" href="#Objective-1">Objective</a></h3><p>&lt;!– stageobjective! –&gt;</p><h3><a class="nav-anchor" id="Risk-Measures-1" href="#Risk-Measures-1">Risk Measures</a></h3><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="SDDP.AbstractRiskMeasure" href="#SDDP.AbstractRiskMeasure"><code>SDDP.AbstractRiskMeasure</code></a> — <span class="docstring-category">Type</span>.</div><div><pre><code class="language-none">AbstractRiskMeasure</code></pre><p><strong>Description</strong></p><p>Abstract type for all risk measures.</p></div><a class="source-link" target="_blank" href="https://github.com/odow/SDDP.jl/tree/7c9c96fc61ce0d8e0a34fc8f48c09afbc05f524d/src/typedefinitions.jl#L7-L13">source</a><br/></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="SDDP.Expectation" href="#SDDP.Expectation"><code>SDDP.Expectation</code></a> — <span class="docstring-category">Type</span>.</div><div><pre><code class="language-none">Expectation()</code></pre><p><strong>Description</strong></p><p>The expectation risk measure.</p></div><a class="source-link" target="_blank" href="https://github.com/odow/SDDP.jl/tree/7c9c96fc61ce0d8e0a34fc8f48c09afbc05f524d/src/riskmeasures.jl#L51-L57">source</a><br/></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="SDDP.NestedAVaR" href="#SDDP.NestedAVaR"><code>SDDP.NestedAVaR</code></a> — <span class="docstring-category">Type</span>.</div><div><pre><code class="language-none">NestedAVaR(;lambda=1.0, beta=1.0)</code></pre><p><strong>Description</strong></p><p>A risk measure that is a convex combination of Expectation and Average Value @ Risk (also called Conditional Value @ Risk).</p><pre><code class="language-none">λ * E[x] + (1 - λ) * AV@R(1-β)[x]</code></pre><p><strong>Keyword Arguments</strong></p><ul><li><p><code>lambda</code></p></li></ul><p>Convex weight on the expectation (<code>(1-lambda)</code> weight is put on the AV@R component. Inreasing values of <code>lambda</code> are less risk averse (more weight on expecattion)</p><ul><li><p><code>beta</code></p></li></ul><p>The quantile at which to calculate the Average Value @ Risk. Increasing values  of <code>beta</code> are less risk averse. If <code>beta=0</code>, then the AV@R component is the  worst case risk measure.</p><p><strong>Returns</strong></p><pre><code class="language-none">`m::NestedAVaR&lt;:AbstractRiskMeasure`</code></pre></div><a class="source-link" target="_blank" href="https://github.com/odow/SDDP.jl/tree/7c9c96fc61ce0d8e0a34fc8f48c09afbc05f524d/src/avar_riskaversion.jl#L23-L46">source</a><br/></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="SDDP.modifyprobability!" href="#SDDP.modifyprobability!"><code>SDDP.modifyprobability!</code></a> — <span class="docstring-category">Function</span>.</div><div><pre><code class="language-none">modifyprobability!(measure::AbstractRiskMeasure,
        riskadjusted_distribution,
        original_distribution::Vector{Float64},
        observations::Vector{Float64},
        m::SDDPModel,
        sp::JuMP.Model
)</code></pre><p><strong>Description</strong></p><p>Calculate the risk-adjusted probability of each scenario using the &#39;change-of-probabilities&#39; approach of Philpott, de Matos, and Finardi,(2013). On solving multistage stochastic programs with coherent risk measures. Operations Research 61(4), 957-970.</p><p><strong>Arguments</strong></p><ul><li><p><code>measure::AbstractRiskMeasure</code></p></li></ul><p>The risk measure</p><ul><li><p><code>riskadjusted_distribution</code></p></li></ul><p>A new probability distribution</p><ul><li><p><code>original_distribution::Vector{Float64}</code></p></li></ul><p>The original probability distribution.</p><ul><li><p><code>observations::Vector{Float64}</code></p></li></ul><p>The vector of objective values from the next stage  problems (one for each scenario).</p><ul><li><p><code>m::SDDPModel</code></p></li></ul><p>The full SDDP model</p><ul><li><p><code>sp::JuMP.Model</code></p></li></ul><p>The stage problem that the cut will be added to.</p></div><a class="source-link" target="_blank" href="https://github.com/odow/SDDP.jl/tree/7c9c96fc61ce0d8e0a34fc8f48c09afbc05f524d/src/riskmeasures.jl#L7-L37">source</a><br/></section><h3><a class="nav-anchor" id="Cut-Oracles-1" href="#Cut-Oracles-1">Cut Oracles</a></h3><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="SDDP.AbstractCutOracle" href="#SDDP.AbstractCutOracle"><code>SDDP.AbstractCutOracle</code></a> — <span class="docstring-category">Type</span>.</div><div><pre><code class="language-none">AbstractCutOracle</code></pre><p><strong>Description</strong></p><p>Abstract type for all cut oracles.</p></div><a class="source-link" target="_blank" href="https://github.com/odow/SDDP.jl/tree/7c9c96fc61ce0d8e0a34fc8f48c09afbc05f524d/src/typedefinitions.jl#L16-L22">source</a><br/></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="SDDP.DefaultCutOracle" href="#SDDP.DefaultCutOracle"><code>SDDP.DefaultCutOracle</code></a> — <span class="docstring-category">Type</span>.</div><div><pre><code class="language-none">DefaultCutOracle()</code></pre><p><strong>Description</strong></p><p>Initialize the default cut oracle.</p><p>This oracle keeps every cut discovered and does not perform cut selection.</p></div><a class="source-link" target="_blank" href="https://github.com/odow/SDDP.jl/tree/7c9c96fc61ce0d8e0a34fc8f48c09afbc05f524d/src/cutoracles.jl#L27-L35">source</a><br/></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="SDDP.LevelOneCutOracle" href="#SDDP.LevelOneCutOracle"><code>SDDP.LevelOneCutOracle</code></a> — <span class="docstring-category">Function</span>.</div><div><pre><code class="language-none">LevelOneCutOracle()</code></pre><p><strong>Description</strong></p><p>Initialize the cut oracle for Level One cut selection. See:</p><p>V. de Matos,A. Philpott, E. Finardi, Improving the performance of Stochastic Dual Dynamic Programming, Journal of Computational and Applied Mathematics 290 (2015) 196–208.</p></div><a class="source-link" target="_blank" href="https://github.com/odow/SDDP.jl/tree/7c9c96fc61ce0d8e0a34fc8f48c09afbc05f524d/src/dematos_cutoracle.jl#L16-L26">source</a><br/></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="SDDP.storecut!" href="#SDDP.storecut!"><code>SDDP.storecut!</code></a> — <span class="docstring-category">Function</span>.</div><div><pre><code class="language-none">storecut!(oracle::AbstactCutOracle, m::SDDPModel, sp::JuMP.Model, cut::Cut)</code></pre><p><strong>Description</strong></p><p>Store the cut <code>cut</code> in the Cut Oracle <code>oracle</code>. <code>oracle</code> will belong to the subproblem <code>sp</code> in the SDDPModel <code>m</code>.</p></div><a class="source-link" target="_blank" href="https://github.com/odow/SDDP.jl/tree/7c9c96fc61ce0d8e0a34fc8f48c09afbc05f524d/src/cutoracles.jl#L7-L14">source</a><br/></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="SDDP.validcuts" href="#SDDP.validcuts"><code>SDDP.validcuts</code></a> — <span class="docstring-category">Function</span>.</div><div><pre><code class="language-none">validcuts(oracle::AbstactCutOracle)</code></pre><p><strong>Description</strong></p><p>Return an iterable list of all the valid cuts contained within <code>oracle</code>.</p></div><a class="source-link" target="_blank" href="https://github.com/odow/SDDP.jl/tree/7c9c96fc61ce0d8e0a34fc8f48c09afbc05f524d/src/cutoracles.jl#L17-L23">source</a><br/></section><h2><a class="nav-anchor" id="Solve-1" href="#Solve-1">Solve</a></h2><p>&lt;!– SDDP.solve –&gt;</p><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="SDDP.MonteCarloSimulation" href="#SDDP.MonteCarloSimulation"><code>SDDP.MonteCarloSimulation</code></a> — <span class="docstring-category">Type</span>.</div><div><pre><code class="language-none">MonteCarloSimulation(;kwargs...)</code></pre><p><strong>Description</strong></p><p>Collection of settings to control the simulation phase of the SDDP solution process.</p><p><strong>Arguments</strong></p><ul><li><p><code>frequency::Int</code></p></li></ul><p>The frequency (by iteration) with which to run the policy simulation phase of the algorithm in order to construct a statistical bound for the policy. Defaults to <code>0</code> (never run).</p><ul><li><p><code>min::Float64</code></p></li></ul><p>Minimum number of simulations to conduct before constructing a confidence interval for the bound. Defaults to <code>20</code>.</p><ul><li><p><code>step::Float64</code></p></li></ul><p>Number of additional simulations to conduct before constructing a new confidence interval for the bound. Defaults to <code>1</code>.</p><ul><li><p><code>max::Float64</code></p></li></ul><p>Maximum number of simulations to conduct in the policy simulation phase. Defaults to <code>min</code>.</p><ul><li><p><code>confidence::Float64</code></p></li></ul><p>Confidence level of the confidence interval. Defaults to <code>0.95</code> (95% CI).</p><ul><li><p><code>termination::Bool</code></p></li></ul><p>Whether to terminate the solution algorithm with the status <code>:converged</code> if the deterministic bound is with in the statistical bound after <code>max</code> simulations. Defaults to <code>false</code>.</p></div><a class="source-link" target="_blank" href="https://github.com/odow/SDDP.jl/tree/7c9c96fc61ce0d8e0a34fc8f48c09afbc05f524d/src/typedefinitions.jl#L203-L231">source</a><br/></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="SDDP.BoundConvergence" href="#SDDP.BoundConvergence"><code>SDDP.BoundConvergence</code></a> — <span class="docstring-category">Type</span>.</div><div><pre><code class="language-none">BoundConvergence(;kwargs...)</code></pre><p><strong>Description</strong></p><p>Collection of settings to control the bound stalling convergence test.</p><p><strong>Arguments</strong></p><ul><li><p><code>iterations::Int</code></p></li></ul><p>Terminate if the maximum deviation in the deterministic bound from the mean over the last <code>iterations</code> number of iterations is less than <code>rtol</code> (in relative terms) or <code>atol</code> (in absolute terms).</p><ul><li><p><code>rtol::Float64</code></p></li></ul><p>Maximum allowed relative deviation from the mean. Defaults to <code>0.0</code></p><ul><li><p><code>atol::Float64</code></p></li></ul><p>Maximum allowed absolute deviation from the mean. Defaults to <code>0.0</code></p></div><a class="source-link" target="_blank" href="https://github.com/odow/SDDP.jl/tree/7c9c96fc61ce0d8e0a34fc8f48c09afbc05f524d/src/typedefinitions.jl#L177-L195">source</a><br/></section><h2><a class="nav-anchor" id="Results-1" href="#Results-1">Results</a></h2><p>&lt;!– simulate –&gt; &lt;!– @visualise –&gt;</p><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="SDDP.getbound" href="#SDDP.getbound"><code>SDDP.getbound</code></a> — <span class="docstring-category">Function</span>.</div><div><pre><code class="language-none">getbound(m)</code></pre><p><strong>Description</strong></p><p>Get the lower (if minimizing), or upper (if maximizing) bound of the solved SDDP model <code>m</code>.</p></div><a class="source-link" target="_blank" href="https://github.com/odow/SDDP.jl/tree/7c9c96fc61ce0d8e0a34fc8f48c09afbc05f524d/src/utilities.jl#L14-L21">source</a><br/></section><h2><a class="nav-anchor" id="Save/Load-1" href="#Save/Load-1">Save/Load</a></h2><p>&lt;!– loadcuts! –&gt;</p><footer><hr/><a class="previous" href="quick.html"><span class="direction">Previous</span><span class="title">Quick Start</span></a></footer></article></body></html>
